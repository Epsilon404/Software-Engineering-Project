{"ast":null,"code":"import \"core-js/modules/es.array.map.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport CommonForm from '../../src/components/CommonForm.vue';\nimport CommonTable from '../../src/components/CommonTable.vue';\nimport { getUser } from '../../api/data';\nexport default {\n  name: 'UserPage',\n  components: {\n    CommonForm: CommonForm,\n    CommonTable: CommonTable\n  },\n  data: function data() {\n    return {\n      operateType: 'add',\n      isShow: false,\n      operateFormLabel: [{\n        model: 'name',\n        label: 'ID',\n        type: 'input'\n      }, {\n        model: 'account',\n        label: '账号',\n        type: 'input'\n      }, {\n        model: 'password',\n        label: '密码',\n        type: 'input'\n      } //可能还得加傻逼头像\n      ],\n      operateForm: {\n        name: '',\n        account: '',\n        password: ''\n      },\n      formLabel: [{\n        model: \"keyword\",\n        label: '',\n        type: 'input'\n      }],\n      searchFrom: {\n        keyword: ''\n      },\n      tableData: [],\n      tableLabel: [{\n        prop: \"name\",\n        label: \"ID\"\n      }, {\n        prop: \"account\",\n        label: \"账号\",\n        width: 320\n      }, {\n        prop: \"password\",\n        label: \"密码\",\n        width: 320\n      }],\n      config: {\n        page: 1,\n        total: 30\n      }\n    };\n  },\n  methods: {\n    confirm: function confirm() {\n      var _this = this;\n\n      if (this.operateType === 'edit') {\n        this.$http.post('/user/edit', this.operateForm).then(function (res) {\n          console.log(res);\n          _this.isShow = false;\n\n          _this.getList();\n        });\n      } else {\n        this.$http.post('/user/add', this.operateForm).then(function (res) {\n          console.log(res);\n          _this.isShow = false;\n\n          _this.getList();\n        });\n      }\n    },\n    addUser: function addUser() {\n      this.isShow = true;\n      this.operateType = 'add';\n      this.operateForm = {\n        name: '',\n        account: '',\n        password: ''\n      };\n    },\n    editUser: function editUser(row) {\n      this.operateType = 'edit';\n      this.isShow = true;\n      this.operateForm = row;\n    },\n    deleteUser: function deleteUser(row) {\n      var _this2 = this;\n\n      this.$confirm(\"确定要删除该用户吗？\", \"提示\", {\n        confitmButtonText: \"确认\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        var id = row.id;\n\n        _this2.$http.get(\"/user/delete\", {\n          params: {\n            id: id\n          }\n        }).then(function () {\n          _this2.$message({\n            type: 'success',\n            message: '删除成功'\n          });\n\n          _this2.getList();\n        });\n      });\n    },\n    getList: function getList() {\n      var _this3 = this;\n\n      var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      this.config.loading = true;\n      name ? this.config.page = 1 : '';\n      getUser({\n        page: this.config.page,\n        name: name\n      }).then(function (res) {\n        console.log(res, 'res');\n        _this3.tableData = res.list.map(function (item) {\n          return item;\n        });\n        _this3.config.total = res.count;\n        _this3.config.loading = false;\n      });\n    }\n  },\n  created: function created() {\n    this.getList();\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACAA,kBADA;AAEAC;AACAC,0BADA;AAEAC;AAFA,GAFA;AAMAC,MANA,kBAMA;AACA;AACAC,wBADA;AAEAC,mBAFA;AAGAC;AACAC,qBADA;AAEAC,mBAFA;AAGAC;AAHA,SAKA;AACAF,wBADA;AAEAC,mBAFA;AAGAC;AAHA,OALA,EAUA;AACAF,yBADA;AAEAC,mBAFA;AAGAC;AAHA,OAVA,CAeA;AAfA,OAHA;AAoBAC;AACAX,gBADA;AAEAY,mBAFA;AAGAC;AAHA,OApBA;AAyBAC,kBACA;AACAN,wBADA;AAEAC,iBAFA;AAGAC;AAHA,OADA,CAzBA;AAgCAK;AACAC;AADA,OAhCA;AAmCAC,mBAnCA;AAoCAC,mBACA;AACAC,oBADA;AAEAV;AAFA,OADA,EAKA;AACAU,uBADA;AAEAV,mBAFA;AAGAW;AAHA,OALA,EAUA;AACAD,wBADA;AAEAV,mBAFA;AAGAW;AAHA,OAVA,CApCA;AAoDAC;AACAC,eADA;AAEAC;AAFA;AApDA;AA0DA,GAjEA;AAkEAC;AACAC,WADA,qBACA;AAAA;;AACA;AACA;AACAC;AACA;;AACA;AACA,SAJA;AAKA,OANA,MAMA;AACA;AACAA;AACA;;AACA;AACA,SAJA;AAKA;AACA,KAfA;AAgBAC,WAhBA,qBAgBA;AACA;AACA;AACA;AACA3B,gBADA;AAEAY,mBAFA;AAGAC;AAHA;AAKA,KAxBA;AAyBAe,YAzBA,oBAyBAC,GAzBA,EAyBA;AACA;AACA;AACA;AACA,KA7BA;AA8BAC,cA9BA,sBA8BAD,GA9BA,EA8BA;AAAA;;AACA;AAAAE;AAAAC;AAAAtB;AAAA,cACA;AAAA;;AACA,yCACA;AAAAuB;AAAAC;AAAA;AAAA,SADA,EAEAC,IAFA,CAEA;AACA;AACAzB,2BADA;AAEA0B;AAFA;;AAIA;AACA,SARA;AAUA,OAZA;AAcA,KA7CA;AA8CAC,WA9CA,qBA8CA;AAAA;;AAAA;AACA;AACArC;AACAsC;AAAAhB;AAAAtB;AAAA;AACA0B;AACA;AAAA;AAAA;AACA;AACA;AACA,OALA;AAMA;AAvDA,GAlEA;AA2HAa,SA3HA,qBA2HA;AACA;AACA;AA7HA","names":["name","components","CommonForm","CommonTable","data","operateType","isShow","operateFormLabel","model","label","type","operateForm","account","password","formLabel","searchFrom","keyword","tableData","tableLabel","prop","width","config","page","total","methods","confirm","console","addUser","editUser","row","deleteUser","confitmButtonText","cancelButtonText","params","id","then","message","getList","getUser","created"],"sourceRoot":"views/UserPage","sources":["index.vue"],"sourcesContent":["<template>\r\n    <div class=\"manage\">\r\n        <el-dialog :title=\"operateType === 'add' ? '新增用户' : '更新用户'\" :visible.sync=\"isShow\">\r\n            <common-form :formLabel=\"operateFormLabel\" :form=\"operateForm\" :inline=\"true\" ref=\"form\">\r\n            </common-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\" isShow = false\">取消</el-button>\r\n                <el-button type=\"primary\" @click=\"confirm\">确定</el-button>\r\n            </div>\r\n        </el-dialog>\r\n        <div class=\"manage-header\">\r\n            <el-button type=\"primary\" @click=\"addUser\">+ 新增</el-button>\r\n            <common-form :formLabel=\"formLabel\" :form=\"searchFrom\" :inline=\"true\" ref=\"form\">\r\n            <el-button type=\"primary\" @click=\"getList(searchFrom.keyword)\">搜索</el-button>\r\n            </common-form>\r\n           \r\n        </div>\r\n        <common-table :tableData=\"tableData\" :tableLabel=\"tableLabel\" :config=\"config\" @changePage=\"getList()\" @edit=\"editUser\" @delete=\"deleteUser\">\r\n        </common-table>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport CommonForm from '../../src/components/CommonForm.vue'\r\nimport CommonTable from '../../src/components/CommonTable.vue'\r\nimport { getUser } from '../../api/data'\r\nexport default{\r\n    name:'UserPage',  \r\n    components: {\r\n        CommonForm,\r\n        CommonTable\r\n    },\r\n    data(){\r\n        return{\r\n            operateType: 'add',\r\n            isShow:false,\r\n            operateFormLabel:[{\r\n                model:'name',\r\n                label:'ID',\r\n                type:'input'\r\n            },\r\n            {\r\n                model:'account',\r\n                label:'账号',\r\n                type:'input'\r\n            },\r\n            {\r\n                model:'password',\r\n                label:'密码',\r\n                type:'input'\r\n            }\r\n            //可能还得加傻逼头像\r\n            ],\r\n            operateForm:{\r\n                name:'',\r\n                account:'',\r\n                password:''\r\n            },\r\n            formLabel:[ \r\n                {\r\n                model:\"keyword\",\r\n                label:'',\r\n                type:'input'\r\n                },\r\n            ],\r\n            searchFrom:{\r\n                keyword:''\r\n            },\r\n            tableData:[],\r\n            tableLabel:[\r\n                {\r\n                    prop: \"name\",\r\n                    label: \"ID\"\r\n                },\r\n                {\r\n                    prop: \"account\",\r\n                    label: \"账号\",\r\n                    width: 320\r\n                },\r\n                {\r\n                    prop: \"password\",\r\n                    label: \"密码\",\r\n                    width: 320\r\n                },\r\n            ],\r\n            config:{\r\n                page: 1,\r\n                total: 30\r\n            }\r\n        }\r\n\r\n    },\r\n    methods:{\r\n        confirm(){\r\n            if(this.operateType === 'edit'){\r\n                this.$http.post('/user/edit', this.operateForm). then(res =>{\r\n                    console.log(res)\r\n                    this.isShow=false\r\n                    this.getList()\r\n                })\r\n            }else{\r\n                this.$http.post('/user/add', this.operateForm). then(res =>{\r\n                    console.log(res)\r\n                    this.isShow=false\r\n                    this.getList()\r\n                })\r\n            }\r\n        },\r\n        addUser(){\r\n            this.isShow = true\r\n            this.operateType = 'add'\r\n            this.operateForm = {\r\n                name:'',\r\n                account:'',\r\n                password:''\r\n            }\r\n        },\r\n        editUser(row){\r\n            this.operateType = 'edit'\r\n            this.isShow= true\r\n            this.operateForm = row\r\n        },\r\n        deleteUser(row){\r\n            this.$confirm(\"确定要删除该用户吗？\", \"提示\", {confitmButtonText: \"确认\", cancelButtonText: \"取消\", type: \"warning\"}).then(\r\n                ()=>{const id= row.id \r\n                this.$http.get(\"/user/delete\", \r\n                {params:{ id }\r\n                }).then(() => {\r\n                    this.$message({\r\n                        type: 'success',\r\n                        message: '删除成功'\r\n                    })\r\n                    this.getList()\r\n                })\r\n                \r\n            })\r\n\r\n        },\r\n        getList( name = ''){\r\n            this.config.loading = true\r\n            name ? (this.config.page = 1) : ''\r\n            getUser({page: this.config.page, name}).then(res =>{\r\n                console.log(res, 'res')\r\n                this.tableData = res.list.map(item =>{return item})\r\n                this.config.total=res.count\r\n                this.config.loading=false\r\n            })\r\n        },\r\n    },\r\n    created(){\r\n        this.getList()\r\n    }\r\n\r\n}\r\n\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.manage-header{\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}